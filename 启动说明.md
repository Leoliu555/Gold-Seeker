# Gold-Seeker Streamlit 应用启动说明

## 🚀 快速启动

### 方法1：使用启动脚本（推荐）
```bash
cd D:\Desktop\Gold-Seeker
python run_app.py
```

### 方法2：直接使用Streamlit
```bash
cd D:\Desktop\Gold-Seeker
$env:STREAMLIT_SERVER_HEADLESS = "true"
python -m streamlit run app.py --server.port 8506
```

## 🌐 访问应用

应用启动后，在浏览器中打开：
- **本地访问**: http://localhost:8506
- **网络访问**: http://0.0.0.0:8506

## 📋 功能说明

应用包含三个主要标签页：

### 1. 💬 Agent Chat
- 与金矿智能预测专家对话
- 融合地质领域知识与大模型技术
- 支持金矿勘探、成矿预测等专业咨询

### 2. 📊 Data & R-mode Analysis
- 数据上传和预览
- 相关性热力图 (英文标签)
- 聚类分析树状图 (英文标签)
- PCA载荷图 (英文标签)
- 统计分析结果

### 3. 🗺️ Spatial & Anomaly Analysis
- 交互式地图显示
- C-A分形分析
- 异常阈值检测
- 空间分布可视化
- **🆕 克里金插值热力图** (点击 "Generate Heatmap (Kriging)" 生成)

## 🔧 故障排除

### 问题：localhost 拒绝连接
**解决方案**：
1. 确保应用正在运行
2. 检查端口是否被占用
3. 尝试使用不同的端口
4. 确保设置了环境变量 `STREAMLIT_SERVER_HEADLESS=true`

### 问题：应用无法启动
**解决方案**：
1. 检查Python环境
2. 安装核心依赖：`pip install numpy pandas scikit-learn matplotlib seaborn scipy streamlit`
3. 安装可选依赖（克里金插值）：`pip install pykrige`
4. 确保在正确的目录中运行

### 问题：端口冲突
**解决方案**：
1. **自动解决**：运行 `taskkill /F /IM python.exe` 终止所有Python进程
2. **手动解决**：
   ```bash
   # 查找占用端口的进程
   netstat -ano | findstr :8506
   
   # 终止进程（替换PID为实际进程ID）
   taskkill /PID [进程ID] /F
   ```
3. **使用不同端口**：
   ```bash
   python -m streamlit run app.py --server.port 8507
   ```
4. **修改启动脚本**：编辑run_app.py，将端口号改为其他值

## 📝 注意事项

1. **首次运行**：应用会生成模拟数据用于演示
2. **数据格式**：支持CSV文件上传，需包含经纬度和地球化学元素数据
3. **性能**：大数据集可能需要较长处理时间
4. **浏览器**：推荐使用Chrome或Edge浏览器

## 🎯 下一步

1. 上传您的地球化学数据
2. 探索不同的分析功能
3. 与AI Agent交互获取专业建议
4. 根据分析结果制定勘探策略

---

## 🔄 重构更新 (2025-12-13)

### 架构优化
- ✅ 前后端分离：数据处理逻辑移至后端
- ✅ 英文界面：避免中文乱码问题
- ✅ 新增功能：克里金插值空间分析

### 依赖说明
- **核心依赖**：numpy, pandas, scikit-learn, matplotlib, seaborn, scipy, streamlit
- **可选依赖**：pykrige（用于克里金插值，如未安装将使用scipy回退）

**应用版本**: 2.0.0 (重构版)  
**最后更新**: 2025-12-13  
**技术支持**: Gold-Seeker开发团队